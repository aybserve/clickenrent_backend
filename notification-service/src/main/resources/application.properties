spring.application.name=notification-service
info.author=Vitaliy Shvetsov

server.port=8085

# Eureka
eureka.client.service-url.defaultZone=http://localhost:8761/eureka/
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true
eureka.instance.prefer-ip-address=true

# Database
spring.datasource.url=${DB_URL:jdbc:postgresql://localhost:5432/clickenrent-notification}
spring.datasource.username=${DB_USERNAME:postgres}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA / HIBERNATE CONFIG
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# Flyway Configuration
spring.flyway.enabled=false
flyway.migrate.enabled=${FLYWAY_MIGRATE:true}
flyway.skip.testdata=${FLYWAY_SKIP_TESTDATA:false}

# DATA INITIALIZATION CONFIG
spring.sql.init.mode=${SQL_INIT_MODE:never}
spring.jpa.defer-datasource-initialization=true

# JWT
# Development settings
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}
# Production settings
#jwt.expiration=${JWT_EXPIRATION:900000}
#jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION:604800000}

# Expo API
expo.api.url=https://exp.host/--/api/v2/push/send

# Actuator
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.health.eureka.enabled=false

# Logging
logging.level.org.clickenrent.notificationservice=INFO
logging.level.org.springframework.web=INFO

# Multi-Tenant Security
tenant.validation.enabled=true

# Sentry Configuration
sentry.dsn=${SENTRY_DSN_NOTIFICATION:}
sentry.environment=${SENTRY_ENVIRONMENT:production}
sentry.release=1.0-SNAPSHOT@notification-service
sentry.traces-sample-rate=${SENTRY_TRACES_SAMPLE_RATE:1.0}
sentry.send-default-pii=false
sentry.enable-tracing=true
sentry.logging.minimum-event-level=error
sentry.logging.minimum-breadcrumb-level=info
sentry.tags.service=notification-service

# KAFKA CONFIGURATION
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
spring.kafka.consumer.group-id=notification-service-group
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=true

# Kafka Topics
kafka.topics.notification-events=notification-events