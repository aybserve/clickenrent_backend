# ========================================
# ClickEnRent Backend - Environment Variables
# ========================================

# ========================================
# SPRING PROFILE CONFIGURATION
# ========================================
# Set to 'staging' for local/staging environments (enables test data, ddl-auto=update)
# Set to 'prod' or leave unset for production (uses ddl-auto=none, no test data)
SPRING_PROFILES_ACTIVE=staging

# ========================================
# DATABASE CONFIGURATION
# ========================================
# DO NOT set DB_URL here! Each service has its own default database URL
# in application.properties (e.g., clickenrent-auth, clickenrent-notification, etc.)
# Only override DB_URL if you need a custom host/port (e.g., Docker):
# DB_URL=jdbc:postgresql://custom-host:5432/clickenrent-auth
DB_USERNAME=postgres
DB_PASSWORD=your-database-password

# Database initialization mode (only needed if not using Flyway)
# Leave as 'never' when using Flyway (default)
SQL_INIT_MODE=never

# Flyway configuration
# Set FLYWAY_MIGRATE=false to disable Flyway migrations entirely
# FLYWAY_MIGRATE=false
# Set FLYWAY_SKIP_TESTDATA=true in PRODUCTION to skip loading sample/test data
# By default, testdata is loaded (safe for local/staging)
# FLYWAY_SKIP_TESTDATA=true

# JPA DDL mode (can be overridden, but profile controls this)
# staging profile sets: update
# production (no profile) sets: none
# JPA_DDL_AUTO=none
# JPA_SHOW_SQL=false

# ========================================
# JWT CONFIGURATION
# ========================================
# Generate with: openssl rand -base64 32
# REQUIRED: Must be set for all services
JWT_SECRET=your-jwt-secret-base64-encoded-256-bit
JWT_EXPIRATION=86400000
JWT_REFRESH_EXPIRATION=604800000

# ========================================
# GOOGLE OAUTH CONFIGURATION
# ========================================
# Get from: https://console.cloud.google.com/apis/credentials
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=your-google-client-secret
GOOGLE_VERIFY_ID_TOKEN=true

# ========================================
# APPLE OAUTH CONFIGURATION
# ========================================
# Get from: https://developer.apple.com
APPLE_TEAM_ID=your-apple-team-id
APPLE_CLIENT_ID=your-apple-service-id
APPLE_KEY_ID=your-apple-key-id
APPLE_PRIVATE_KEY=-----BEGIN PRIVATE KEY-----\nYOUR_PRIVATE_KEY_CONTENT\n-----END PRIVATE KEY-----
APPLE_VERIFY_ID_TOKEN=true

# ========================================
# PAYMENT PROVIDER CONFIGURATION
# ========================================
# Stripe (optional - for backward compatibility)
STRIPE_API_KEY=sk_test_your_stripe_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# MultiSafePay (REQUIRED for payment-service)
MULTISAFEPAY_API_KEY=your-multisafepay-api-key
MULTISAFEPAY_TEST_MODE=true
MULTISAFEPAY_WEBHOOK_SECRET=your-webhook-secret
MULTISAFEPAY_NOTIFICATION_URL=http://localhost:8080/api/v1/webhooks/multisafepay
MULTISAFEPAY_CANCEL_URL=http://localhost:3000/payment/cancelled
MULTISAFEPAY_REDIRECT_URL=http://localhost:3000/payment/success

# ========================================
# SERVICE AUTHENTICATION (Inter-service)
# ========================================
SERVICE_AUTH_USERNAME=service_payment
SERVICE_AUTH_PASSWORD=your-service-account-password

# ========================================
# AZURE BLOB STORAGE (rental-service)
# ========================================
AZURE_STORAGE_CONNECTION_STRING=DefaultEndpointsProtocol=https;AccountName=youraccountname;AccountKey=youraccountkey;EndpointSuffix=core.windows.net
AZURE_STORAGE_CONTAINER_NAME=bike-rental-photos

# ========================================
# MAPBOX CONFIGURATION (rental-service)
# ========================================
# Get from: https://account.mapbox.com/access-tokens/
MAPBOX_API_KEY=your-mapbox-access-token

# ========================================
# LOCK ENCRYPTION (rental-service)
# ========================================
# Must be exactly 32 characters for AES-256
LOCK_ENCRYPTION_KEY=your-32-character-encryption-key

# ========================================
# REDIS CONFIGURATION
# ========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password

# ========================================
# ELASTICSEARCH CONFIGURATION
# ========================================
# Generate a strong password for Elasticsearch
# The 'elastic' user is the built-in superuser
ES_URIS=http://localhost:9200
ES_USERNAME=elastic
ES_PASSWORD=your-elasticsearch-password

# ========================================
# RATE LIMITING (gateway)
# ========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_IP_REPLENISH=20
RATE_LIMIT_IP_BURST=30
RATE_LIMIT_USER_REPLENISH=50
RATE_LIMIT_USER_BURST=100

# ========================================
# SENTRY ERROR TRACKING
# ========================================
# Get DSN values from https://sentry.io after creating projects
# Each service should have its own project/DSN for better error tracking
# Leave empty to disable Sentry
SENTRY_DSN_AUTH=
SENTRY_DSN_RENTAL=
SENTRY_DSN_SUPPORT=
SENTRY_DSN_PAYMENT=
SENTRY_DSN_NOTIFICATION=
SENTRY_DSN_SEARCH=
SENTRY_DSN_GATEWAY=
SENTRY_DSN_ANALYTICS=

# Sentry Environment (production, staging, development)
SENTRY_ENVIRONMENT=staging

# Sentry Traces Sample Rate (1.0 = 100% of transactions, 0.1 = 10%)
SENTRY_TRACES_SAMPLE_RATE=1.0
